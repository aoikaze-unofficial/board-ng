# 共享网盘上传说明

出于方便群友的上传资源的考虑，为向共享网盘上传资源做出了一些说明：

## 概述

目前由管理员持有共享网盘的 OneDrive 账号和密码；管理员可以自己将共享 OneDrive 增加到本地同步客户端，相对方便的更新文件（虽然我也推荐如无必要，尽量给自己的个人账号授权使用网页版）。若有群友想要上传文件，可以向管理员提供自己个人的微软账号，由管理员设置授权链接，并通过授权链接的网页端上传文件。

> **为什么不再共享账号和密码？**
>
> 一方面，微软有可能会限制异地登陆的 OneDrive 账号的使用（来源于 AXIA），这会对我们使用 OneDrive 造成不便。另一方面，如果持有用户名和密码，就相当于拥有了整个账号的所有权；虽然我们信任所有的群友，但是可能存在账号密码泄露后，被恶意的登录删除清空回收站的情况发生；
>
> 而相对地，使用共享授权链接有一些好处：一方面，共享链接不可以访问回收站，即使被恶性删除也会留有记录（回收站可恢复，删除记录可以特定到链接）；另一方面，在网页版 OneDrive 中，可以看到每一个文件的上传者（邮箱账号），可以方便管理。

目前还没有比较好的办法既使用 OneDrive 同步客户端，又使用访问链接控制的办法；因为微软的政策，OneDrive 的商用版不能方便的在个人版 OneDrive 中创建链接。如果你有更好的办法，可以告诉管理或者直接编辑此页面。

## 上传方式

不管你通过什么方式上传，上传之前请首先在群公告中的~~腾讯文档~~中检查是否已经上传；如果没有，则注明上传的游戏、上传者和时间后再开始上传。此外，这个文档中有关于资源问题的描述，如果资源出现了问题可以联系表中标注的群友，或在这里反馈。

> 由于腾讯文档已经暴毙，目前公共目录已经重新放置在 Office 365 上，与共享文件夹使用同样的方法管理：
>
> - 对于有上传权限的群友：可以通过 https://aoikaze-my.sharepoint.com/:x:/g/personal/gal_aoikaze_onmicrosoft_com/EceatTcUVbtGozsd4RYXBNkBZMMbAHsIcwLJBJFGAcbsRA?e=Eg1PEj 输入自己的邮箱验证后进行编辑
> - 对于查看目录的群友：可以通过 https://aoikaze-my.sharepoint.com/:x:/g/personal/gal_aoikaze_onmicrosoft_com/EceatTcUVbtGozsd4RYXBNkBi7P6X00GgYUClRyFwBI6UA?e=qwV8J0 查看目录。
>
> 管理在授予上传权限时，也需要授予这个目录的编辑权限。

共享网盘的根目录下有目录表，目前由群友`逗比`维护。

再次声明：不管你通过哪种方式上传，上传之前都需要**先更新目录文档**；目前我们的目录文档分为了目录和记录**两个部分**，更新目录需要首先更新上传记录（游戏名称、上传者、上传日期），之后再判断游戏的类型（Galgame/RPG），最后在目录的部分遵循现有格式增加一条记录（会社、游戏名称）。

根据角色不同，有以下三种不同的说明：

### 管理员

对于已经持有用户名和密码的群友，虽然还是推荐使用下面的方法为自己授权后上传，但是你们还是可以使用本地客户端上传：

#### 登录

首先找到 OneDrive 客户端程序，或从托盘中找到已经登陆的 OneDrive 个人版图标：

![upload1](/image/post/oneindex/upload1.png)

打开设置页面后可以添加账户，输入共享网盘的用户名和密码以登录。

![upload2](/image/post/oneindex/upload2.png)

之后你可能会看到这样的页面；OneDrive 本地同步客户端默认会将同步的位置放在系统分区；而使用同步客户端上传文件时文件必须要存储在这里，因此，如果你的系统分区没有足够的空间，请务必在这里修改 OneDrive 的位置到你空间较大的分区上。

![upload3](/image/post/oneindex/upload3.png)

之后就登录完成了，你应该会在资源管理器的左侧发现一个这个 OneDrive 文件夹。

#### 上传

将你要上传的文件复制到 OneDrive 本地文件夹指定位置就可以自动同步；你可以在托盘中图标确认上传的进度和速度。OneDrive 文件夹如下：

![upload4](/image/post/oneindex/upload4.png)

文件右侧的图标代表文件当前的同步状态；云朵代表只存储在云端，而绿色的勾表示本地存储了副本；当你的同步完成后，你上传的文件右侧应该是绿色的勾；此时右键该文件，可以选择释放空间删除本地副本，从而腾出空间上传其他的文件。

![upload5](/image/post/oneindex/upload5.png)

即使你不这么做，OneDrive 也会在你不使用文件一段时间后将其自动删除。

#### 下载

如果你要使用同步客户端下载文件，只需要找到这个文件，并右键将其始终保留在此设备上，等待同步完成后文件的副本就保存到了本地；此时你可以直接解压后释放空间（当然，不要解压在当前文件夹），也可以复制文件到你要保存的地方之后再释放空间。

~~因为这实在太笨了，所以我建议直接去网页版下载。~~

**不要直接拖动 OneDrive 文件夹中的文件到你的硬盘中！这可能会被视为剪切而导致 OneDrive 中的文件丢失！**

### 使用共享链接

目前比较推荐的上传方法，即使你持有了共享网盘的用户名和密码我也推荐你使用这种方式上传；虽然这种方法目前只支持通过网页版上传，但是国内网页版 OneDrive 的上传速度还可以接受（测试：校园网裸连，上传总大小为 2.2 GB 的文件一共使用了 20 分钟左右），并且可以极大地方便管理。如果你使用网页版的上传没有不稳定到无法使用，还是强烈推荐使用这种方法上传。

首先你需要从持有 OneDrive 账号的管理处获得一个授权链接，这个过程中你需要提供自己的邮箱地址；之后，你应该就会得到一个大概长这样的地址：

```
https://aoikaze-my.sharepoint.com/:f:/g/personal/gal_aoikaze_onmicrosoft_com/<...>?email=<你的 email>&e=<...>
```

你需要妥善保存这个链接；当你需要上传某个文件时，可以访问此链接，并看到类似下面的窗口：

![upload6](/image/post/oneindex/upload6.png)

从你的个人邮箱中接收验证码之后，你就可以通过网页版的 OneDrive 访问共享网盘；将你要上传的文件拖动到窗口中你要上传的位置上传，等待上传完成后关闭窗口即可。

如果你要翻墙上传文件，可能需要开启全局代理或代理 OneDrive 所有相关的域名：否则可能会导致上传失败。

### 设置共享链接

持有用户名和密码的管理员需要为群友提供共享链接，操作做法如下：

首先前往 [office.com](https://office.com/)，登录当前的共享网盘账号，进入 OneDrive；

![upload7](/image/post/oneindex/upload7.png)

进入 OneDrive 之后就可以看到共享站根目录所使用的文件夹（因为 OneDrive 不可以直接共享整个根目录，所以一般我们会建立一个文件夹并共享这个文件夹），点击共享按钮。

![upload8](/image/post/oneindex/upload8.png)

在弹出的窗口内设置共享链接类型为“你指定的人员可编辑”，输入群友的邮箱并复制链接：

![upload9](/image/post/oneindex/upload9.png)

将复制得到的链接发给群友：

![upload10](/image/post/oneindex/upload10.png)

至此，共享链接设置完成；之后该群友上传的文件在 OneDrive 网页版中可以看到修改者是该群友的邮箱，而管理员可以在网页版的 OneDrive 中检查该群友的操作，并在必要时移除他的访问权限。

由于现在使用 Office 365 的共享文档，授予编辑权限时还需要授予文档的访问权限。文档位于 `网盘根目录/共享文档/目录.xlsx`。

